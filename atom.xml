<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>MAG's Note</title><link href="https://magicalboy.com/" rel="alternate"></link><link href="https://magicalboy.com/atom.xml" rel="self"></link><id>https://magicalboy.com/</id><updated>2022-05-13T15:30:00+08:00</updated><subtitle>iOS/macOS/IoT/Web/Game</subtitle><entry><title>RC522 射频 IC 感应模块</title><link href="https://magicalboy.com/rfid_mifare.html" rel="alternate"></link><published>2022-05-13T15:30:00+08:00</published><updated>2022-05-13T15:30:00+08:00</updated><author><name>Donly</name></author><id>tag:magicalboy.com,2022-05-13:/rfid_mifare.html</id><summary type="html">&lt;p&gt;RC522 RFID 读写模块是一个普遍的、适合入门的选择。这里会简单地介绍模块的特点，和 Arduino Uno 连接使用，复制公司的门禁卡贴到手 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;RC522 RFID 读写模块是一个普遍的、适合入门的选择。这里会简单地介绍模块的特点，和 Arduino Uno 连接使用，复制公司的门禁卡贴到手机壳上方便使用，避免了经常忘带卡的尴尬。&lt;/p&gt;
&lt;p&gt;&lt;img alt="RC522" src="images/arduino/RC522.jpg"&gt;&lt;/p&gt;
&lt;p&gt;注意这个模块的版本号，中国版的模块可能有功能缺失或使用不正常的问题，详见：https://github.com/miguelbalboa/rfid/wiki/Chinese_RFID-RC522。我购买的这块固件版本号是 v2.0，使用 MFRC522 库可以检测：&lt;code&gt;Firmware Version: 0x92 = v2.0&lt;/code&gt; 。&lt;/p&gt;
&lt;h2&gt;相关术语介绍&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;RFID&lt;/code&gt;: 射频识别（英语：Radio Frequency IDentification）是一种无线通信技术。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;MIFARE&lt;/code&gt;: 是恩智浦半导体公司（NXP Semiconductors）拥有的一系列非接触式智能卡和近傍型卡技术的注册商标。MIFARE包括一系列依循ISO/IEC 14443-A规格，利用无线射频识别（频率为13.56MHz）的多种非接触式智能卡专有解决方案。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;UID&lt;/code&gt;：唯一标识符（Unique Identifier）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RID&lt;/code&gt;：安全随机标识符（Random Security Identifier）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PICC&lt;/code&gt;: Proximity Integrated Circuit (“Contactless Card”)，感应集成电路（“非接触式卡”）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SAK&lt;/code&gt;: Select Acknowledge, Type A &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;主要特点&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Frequency Range&lt;/td&gt;
&lt;td&gt;13.56 MHz ISM Band&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Host Interface&lt;/td&gt;
&lt;td&gt;SPI / I2C / UART&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Operating Supply Voltage&lt;/td&gt;
&lt;td&gt;2.5 V to 3.3 V&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Max. Operating Current&lt;/td&gt;
&lt;td&gt;13-26mA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Standby current&lt;/td&gt;
&lt;td&gt;10-13mA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Min. Current(Power down)&lt;/td&gt;
&lt;td&gt;10µA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Logic Inputs&lt;/td&gt;
&lt;td&gt;5V Tolerant&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Read Range&lt;/td&gt;
&lt;td&gt;0~60mm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Programmer timer&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Internal self-test&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FIFO buffer&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Highly integrated analog circuitry&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CRC co-processor&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Pinout&lt;/h2&gt;
&lt;p&gt;&lt;img alt="RC522 Pinout" src="images/arduino/RC522_pinout.png"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;VCC supplies power for the module. This can be anywhere from 2.5 to 3.3 volts. You can connect it to 3.3V output from your Arduino. Remember connecting it to 5V pin will likely destroy your module!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RST is an input for Reset and power-down. When this pin goes low, hard power-down is enabled. This turns off all internal current sinks including the oscillator and the input pins are disconnected from the outside world. On the rising edge, the module is reset.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;GND is the Ground Pin and needs to be connected to GND pin on the Arduino.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IRQ is an interrupt pin that can alert the microcontroller when RFID tag comes into its vicinity.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MISO / SCL / Tx pin acts as Master-In-Slave-Out when SPI interface is enabled, acts as serial clock when I2C interface is enabled and acts as serial data output when UART interface is enabled.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MOSI (Master Out Slave In) is SPI input to the RC522 module.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SCK (Serial Clock) accepts clock pulses provided by the SPI bus Master i.e. Arduino.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SS / SDA / Rx pin acts as Signal input when SPI interface is enabled, acts as serial data when I2C interface is enabled and acts as serial data input when UART interface is enabled. This pin is usually marked by encasing the pin in a square so it can be used as a reference for identifying the other pins.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;接线&lt;/h2&gt;
&lt;p&gt;&lt;img alt="RC522 Connection" src="images/arduino/rc522_arduino_connection.png"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;RC522&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;  &lt;span class="n"&gt;Arduino&lt;/span&gt;
&lt;span class="n"&gt;MISO&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;D12&lt;/span&gt;
&lt;span class="n"&gt;RST&lt;/span&gt;  &lt;span class="o"&gt;&amp;lt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;D9&lt;/span&gt;
&lt;span class="n"&gt;MOSI&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;D11&lt;/span&gt;
&lt;span class="n"&gt;SCK&lt;/span&gt;  &lt;span class="o"&gt;&amp;lt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;D13&lt;/span&gt;
&lt;span class="n"&gt;IRQ&lt;/span&gt;  &lt;span class="o"&gt;&amp;lt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Not&lt;/span&gt; &lt;span class="n"&gt;connected&lt;/span&gt;
&lt;span class="n"&gt;SDA&lt;/span&gt;  &lt;span class="o"&gt;&amp;lt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;D10&lt;/span&gt;
&lt;span class="n"&gt;GND&lt;/span&gt;  &lt;span class="o"&gt;&amp;lt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;GND&lt;/span&gt;
&lt;span class="m"&gt;3.3&lt;/span&gt;&lt;span class="n"&gt;V&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;-&amp;gt;&lt;/span&gt; &lt;span class="m"&gt;3.3&lt;/span&gt;&lt;span class="n"&gt;V&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;图中的 OLED 屏模块没有用到可以忽略。&lt;/p&gt;
&lt;h2&gt;安装 Arduino MFRC522 库&lt;/h2&gt;
&lt;p&gt;直接打开 Arduino 软件在库中搜索 RC522，安装这个库 https://github.com/miguelbalboa/rfid。&lt;/p&gt;
&lt;p&gt;&lt;img alt="RC522 Library" src="images/arduino/nfrc522_lib.png"&gt;&lt;/p&gt;
&lt;h2&gt;打开库自带例程&lt;/h2&gt;
&lt;p&gt;先打开 &lt;code&gt;DumpInfo&lt;/code&gt; 项目读取公司门禁卡的 UID，读到的数据如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Card UID: 8C 1A B9 1F
Card SAK: &lt;span class="m"&gt;08&lt;/span&gt;
PICC type: MIFARE 1KB
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;再打开 &lt;code&gt;ChangeUID&lt;/code&gt; Example 项目，修改这一行代码为自己要改的新 UID：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cm"&gt;/* Set your new UID here! */&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;constexpr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;newUid&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mh"&gt;0x8C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0xB9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;编译上传到 Arduino Uno。&lt;/p&gt;
&lt;h2&gt;复制到新卡贴&lt;/h2&gt;
&lt;p&gt;直接将新卡贴放到感应区上完成 UID 的修改。注意：必须购买可以修改 0 扇区的 UID 卡贴，否则会修改失败，相当于什么也没发生。&lt;/p&gt;
&lt;h2&gt;其它参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://lastminuteengineers.com/how-rfid-works-rc522-arduino-tutorial/&lt;/li&gt;
&lt;li&gt;https://zh.wikipedia.org/wiki/MIFARE&lt;/li&gt;
&lt;li&gt;https://www.nxp.com/docs/en/data-sheet/MF1S50YYX_V1.pdf&lt;/li&gt;
&lt;li&gt;https://fanzheng.org/archives/30&lt;/li&gt;
&lt;/ul&gt;</content><category term="misc"></category><category term="arduino"></category><category term="rfid"></category><category term="mifare"></category></entry><entry><title>Arduino UNO 兼容板的使用</title><link href="https://magicalboy.com/arduino_uno_compatible_board.html" rel="alternate"></link><published>2022-05-13T00:00:00+08:00</published><updated>2022-05-13T00:00:00+08:00</updated><author><name>Donly</name></author><id>tag:magicalboy.com,2022-05-13:/arduino_uno_compatible_board.html</id><summary type="html">&lt;h2&gt;介绍&lt;/h2&gt;
&lt;p&gt;这是一款替代 Arduino UNO 的廉价解决方案，采用 Atmel Atmega328 微处理控制器：&lt;/p&gt;
&lt;p&gt;&lt;img alt="D1" src="images/arduino/arduino_uno_compatible_board.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;安装和使用&lt;/h2&gt;
&lt;p&gt;使用 Arduino IDE 进行开发，Board 直接选择官方的 &lt;code&gt;Arduino AVR …&lt;/code&gt;&lt;/p&gt;</summary><content type="html">&lt;h2&gt;介绍&lt;/h2&gt;
&lt;p&gt;这是一款替代 Arduino UNO 的廉价解决方案，采用 Atmel Atmega328 微处理控制器：&lt;/p&gt;
&lt;p&gt;&lt;img alt="D1" src="images/arduino/arduino_uno_compatible_board.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;安装和使用&lt;/h2&gt;
&lt;p&gt;使用 Arduino IDE 进行开发，Board 直接选择官方的 &lt;code&gt;Arduino AVR Boards -&amp;gt; Arduino Uno&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;测试&lt;/h2&gt;
&lt;p&gt;使用官方的 Example &lt;code&gt;Blink&lt;/code&gt; 例程测试。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  Blink&lt;/span&gt;

&lt;span class="cm"&gt;  Turns an LED on for one second, then off for one second, repeatedly.&lt;/span&gt;

&lt;span class="cm"&gt;  Most Arduinos have an on-board LED you can control. On the UNO, MEGA and ZERO&lt;/span&gt;
&lt;span class="cm"&gt;  it is attached to digital pin 13, on MKR1000 on pin 6. LED_BUILTIN is set to&lt;/span&gt;
&lt;span class="cm"&gt;  the correct LED pin independent of which board is used.&lt;/span&gt;
&lt;span class="cm"&gt;  If you want to know what pin the on-board LED is connected to on your Arduino&lt;/span&gt;
&lt;span class="cm"&gt;  model, check the Technical Specs of your board at:&lt;/span&gt;
&lt;span class="cm"&gt;  https://www.arduino.cc/en/Main/Products&lt;/span&gt;

&lt;span class="cm"&gt;  modified 8 May 2014&lt;/span&gt;
&lt;span class="cm"&gt;  by Scott Fitzgerald&lt;/span&gt;
&lt;span class="cm"&gt;  modified 2 Sep 2016&lt;/span&gt;
&lt;span class="cm"&gt;  by Arturo Guadalupi&lt;/span&gt;
&lt;span class="cm"&gt;  modified 8 Sep 2016&lt;/span&gt;
&lt;span class="cm"&gt;  by Colby Newman&lt;/span&gt;

&lt;span class="cm"&gt;  This example code is in the public domain.&lt;/span&gt;

&lt;span class="cm"&gt;  https://www.arduino.cc/en/Tutorial/BuiltInExamples/Blink&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// the setup function runs once when you press reset or power the board&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// initialize digital pin LED_BUILTIN as an output.&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;pinMode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LED_BUILTIN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OUTPUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// the loop function runs over and over again forever&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;digitalWrite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LED_BUILTIN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HIGH&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="c1"&gt;// turn the LED on (HIGH is the voltage level)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;                       &lt;/span&gt;&lt;span class="c1"&gt;// wait for a second&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;digitalWrite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LED_BUILTIN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOW&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// turn the LED off by making the voltage LOW&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;                       &lt;/span&gt;&lt;span class="c1"&gt;// wait for a second&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>米家 LED 灯泡蓝牙 MESH 版使用</title><link href="https://magicalboy.com/mi_smart_led_bulb.html" rel="alternate"></link><published>2022-03-08T15:00:00+08:00</published><updated>2022-03-08T15:00:00+08:00</updated><author><name>Donly</name></author><id>tag:magicalboy.com,2022-03-08:/mi_smart_led_bulb.html</id><summary type="html">&lt;p&gt;这个智能灯泡购于2022年03月，PDD卖18元。&lt;/p&gt;
&lt;p&gt;&lt;img alt="米家LED灯泡蓝牙mesh版，图片来源www.xdea.xyz" src="images/iot/mi_smart_led_pcb.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;主要特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;灯泡型号：MJDP09YL&lt;/li&gt;
&lt;li&gt;灯头规格：E27&lt;/li&gt;
&lt;li&gt;功率：5W，16x1W/LED&lt;/li&gt;
&lt;li&gt;无线连接：蓝牙 BLE 5.0，不占用无线路 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;这个智能灯泡购于2022年03月，PDD卖18元。&lt;/p&gt;
&lt;p&gt;&lt;img alt="米家LED灯泡蓝牙mesh版，图片来源www.xdea.xyz" src="images/iot/mi_smart_led_pcb.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;主要特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;灯泡型号：MJDP09YL&lt;/li&gt;
&lt;li&gt;灯头规格：E27&lt;/li&gt;
&lt;li&gt;功率：5W，16x1W/LED&lt;/li&gt;
&lt;li&gt;无线连接：蓝牙 BLE 5.0，不占用无线路由器资源，需米家蓝牙网关配网&lt;/li&gt;
&lt;li&gt;其它：支持凌动开关&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;方案&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;驱动：由一枚晶丰明源的 BP5778 线性恒流芯片驱动16颗灯珠，暖色冷色各8颗&lt;/li&gt;
&lt;li&gt;无线模块：小米推出的 6 元 BLE Mesh 模组，MHCB05P 是基于 Realtek 的 RTL8762CMF 高性能的 BLE 模组， 内置 ARM Cortex-M4F 核， 高发射功率 7.5dbm，相关开发资料参考：https://www.shenzhenware.com/articles/13630.&lt;/li&gt;
&lt;li&gt;其它主要元件：&lt;/li&gt;
&lt;li&gt;BT10S 整流桥，将交流电转换成直流；&lt;/li&gt;
&lt;li&gt;一颗晶丰明源的 BP8519C，用于 3.3v 稳压；&lt;/li&gt;
&lt;li&gt;有一路火线用于灵动模式的相位检测；&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;使用&lt;/h2&gt;
&lt;p&gt;下载米家App，先将蓝牙打开再添加设备。这种方式只能近距离遥控，如果需要远程遥控需要搭配米家的蓝牙网关使用。&lt;/p&gt;
&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://www.mi.com/global/mi-smart-led-bulb-warm-white/"&gt;Mi Smart LED Bulb (Warm White)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.xdea.xyz/2021/06/%E7%B1%B3%E5%AE%B6led%E7%81%AF%E6%B3%A1%E8%93%9D%E7%89%99mesh%E7%89%88%E6%8B%86%E8%A7%A3/"&gt;米家LED灯泡蓝牙MESH版拆解 – Xdea&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.mydigit.cn/thread-219664-1-1.html"&gt;米家LED灯泡蓝牙mesh版拆解 - 拆机乐园 数码之家&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content><category term="misc"></category><category term="iot"></category><category term="mi"></category><category term="小米"></category><category term="米家"></category><category term="蓝牙"></category><category term="ble"></category><category term="mesh"></category></entry><entry><title>小米温湿度计 PRO 使用</title><link href="https://magicalboy.com/mi_temperature_and_humidity_monitor_clock_pro.html" rel="alternate"></link><published>2022-03-08T15:00:00+08:00</published><updated>2022-03-08T15:00:00+08:00</updated><author><name>Donly</name></author><id>tag:magicalboy.com,2022-03-08:/mi_temperature_and_humidity_monitor_clock_pro.html</id><summary type="html">&lt;p&gt;这个产品购于 2020 年底，价格 68 元仅供参考。&lt;/p&gt;
&lt;p&gt;&lt;img alt="小米温湿度计PRO版" src="images/iot/mi_temperature_and_humidity_monitor_clock_pro.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;主要特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;型号： LYWSD02MMC&lt;/li&gt;
&lt;li&gt;电池规格：CR2032 x2，于 2022 年 3 月换了电池，可见原机电池可以使用 2 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;这个产品购于 2020 年底，价格 68 元仅供参考。&lt;/p&gt;
&lt;p&gt;&lt;img alt="小米温湿度计PRO版" src="images/iot/mi_temperature_and_humidity_monitor_clock_pro.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;主要特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;型号： LYWSD02MMC&lt;/li&gt;
&lt;li&gt;电池规格：CR2032 x2，于 2022 年 3 月换了电池，可见原机电池可以使用 2 年；&lt;/li&gt;
&lt;li&gt;无线连接：蓝牙 BLE 4.0/5.0，不占用无线路由器资源，需米家蓝牙网关配网；&lt;/li&gt;
&lt;li&gt;屏幕：电子墨水大屏，全部显示内容如下：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="小米温湿度计PRO屏幕，图片来源见水印" src="images/iot/1098-mi-pro-01.png"&gt;&lt;/p&gt;
&lt;h2&gt;方案&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;温湿度传感器：SHTC3（精度：±2 %RH and ±0.2 °C），&lt;a href="https://www.mouser.com/datasheet/2/682/Sensirion_Humidity_Sensors_SHTC3_Datasheet-1386761.pdf"&gt;数据手册下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;无线模块：低功耗蓝牙5.0/MCU DA14585&lt;/li&gt;
&lt;li&gt;RTC时钟芯片：BM8563，广告说高精度时钟芯片，经使用发现半年左右有3分钟左右误差&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;使用&lt;/h2&gt;
&lt;p&gt;TBD&lt;/p&gt;
&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://www.mi.com/buy/detail?product_id=9542"&gt;电子温湿度计Pro立即购买-小米商城&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.arduino.cn/thread-91956-1-1.html"&gt;"高精度"米家电子温湿度计Pro拆解-Arduino中文社区&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://cyhour.com/1098/"&gt;米家电子温湿度计 Pro 拆机 | 垃圾站&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content><category term="misc"></category><category term="iot"></category><category term="mi"></category><category term="小米"></category><category term="米家"></category><category term="蓝牙"></category><category term="ble"></category></entry><entry><title>D1 Arduino 8266EX 兼容板的使用</title><link href="https://magicalboy.com/d1_arduino_8266_compatible_board.html" rel="alternate"></link><published>2019-05-29T00:00:00+08:00</published><updated>2019-05-29T00:00:00+08:00</updated><author><name>Donly</name></author><id>tag:magicalboy.com,2019-05-29:/d1_arduino_8266_compatible_board.html</id><summary type="html">&lt;h2&gt;介绍&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://wiki.wemos.cc/products:d1:d1#technical_specs"&gt;D1&lt;/a&gt;，是一款替代 Arduino UNO 8266 的廉价解决方案，在淘宝上买到的一般长这样：&lt;/p&gt;
&lt;p&gt;&lt;img alt="D1" src="images/arduino/d1.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;安装&lt;/h2&gt;
&lt;p&gt;这是一款 Arduino 兼容的开发板，可以使用 Arduino IDE 进 …&lt;/p&gt;</summary><content type="html">&lt;h2&gt;介绍&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://wiki.wemos.cc/products:d1:d1#technical_specs"&gt;D1&lt;/a&gt;，是一款替代 Arduino UNO 8266 的廉价解决方案，在淘宝上买到的一般长这样：&lt;/p&gt;
&lt;p&gt;&lt;img alt="D1" src="images/arduino/d1.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;安装&lt;/h2&gt;
&lt;p&gt;这是一款 Arduino 兼容的开发板，可以使用 Arduino IDE 进行开发，参考 &lt;a href="https://github.com/esp8266/Arduino#installing-with-boards-manager"&gt;installing-with-boards-manager&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;使用&lt;/h2&gt;
&lt;p&gt;&lt;img alt="在 macOS Arduino 上的使用参数" src="images/arduino/d1_arduino_setup.png"&gt;&lt;/p&gt;
&lt;h2&gt;测试&lt;/h2&gt;
&lt;p&gt;使用 &lt;code&gt;WiFiScan&lt;/code&gt; 例程测试，运行后我的串口输出结果：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;29.798&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scan&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;31.952&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scan&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;31.952&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;found&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;31.952&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;long&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;74&lt;/span&gt;&lt;span class="o"&gt;)*&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;31.985&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Home_2018&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;91&lt;/span&gt;&lt;span class="o"&gt;)*&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;31.985&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Home_2018&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;86&lt;/span&gt;&lt;span class="o"&gt;)*&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;31.985&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TP&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;LINK_2F1A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="o"&gt;)*&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;32.018&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ChinaNet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ZQRK&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;)*&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;32.018&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2503&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt;&lt;span class="o"&gt;)*&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;32.018&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OpenWrt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;)*&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;32.018&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ChinaNet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;qwtx&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="o"&gt;)*&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>LGT8F328P Arduino Nano3 兼容板的使用</title><link href="https://magicalboy.com/lgt8f328p_nano3_compatible_board.html" rel="alternate"></link><published>2019-05-19T00:00:00+08:00</published><updated>2022-02-16T17:40:00+08:00</updated><author><name>Donly</name></author><id>tag:magicalboy.com,2019-05-19:/lgt8f328p_nano3_compatible_board.html</id><summary type="html">&lt;h2&gt;介绍&lt;/h2&gt;
&lt;p&gt;LGT8F328P LQFP32，是一款替代 NANO V3.0 的廉价解决方案，在淘宝上买到的一般长这样：
&lt;img alt="LGT8F328P" src="images/arduino/LGT8F328P.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.ocrobot.com/doku.php?id=ocrobot:alpha:8f328p-u:main"&gt;ALPHA 8F328P-U&lt;/a&gt; 所使用的 MCU 为LGT8F328P，是一款 Atmel MEGA328P 兼容芯片。USB …&lt;/p&gt;</summary><content type="html">&lt;h2&gt;介绍&lt;/h2&gt;
&lt;p&gt;LGT8F328P LQFP32，是一款替代 NANO V3.0 的廉价解决方案，在淘宝上买到的一般长这样：
&lt;img alt="LGT8F328P" src="images/arduino/LGT8F328P.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.ocrobot.com/doku.php?id=ocrobot:alpha:8f328p-u:main"&gt;ALPHA 8F328P-U&lt;/a&gt; 所使用的 MCU 为LGT8F328P，是一款 Atmel MEGA328P 兼容芯片。USB 芯片使用的是合泰 HT42B534-1，WIN10和MAC OS X免驱。由 &lt;a href="http://www.ocrobot.com/doku.php?id=start"&gt;OCROBOT&lt;/a&gt; 设计，板载USB 至 UART。&lt;/p&gt;
&lt;h2&gt;安装&lt;/h2&gt;
&lt;p&gt;&lt;del&gt;ALPHA 8F328P-U是一款Arduino兼容的开发板。可以使用Arduino IDE进行开发（需要自己安装支持），参考 https://github.com/donly/Larduino_HSP#installation. &lt;/del&gt;&lt;/p&gt;
&lt;p&gt;目前版本 Arduino IDE 是 &lt;code&gt;1.8.19&lt;/code&gt; 已经自带支持。&lt;/p&gt;
&lt;h2&gt;使用&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Arduino Nano" src="images/arduino/nano_8f328p_setup.png"&gt;&lt;/p&gt;
&lt;h2&gt;测试&lt;/h2&gt;
&lt;p&gt;使用 &lt;code&gt;Blink&lt;/code&gt; 例程&lt;/p&gt;</content><category term="misc"></category><category term="arduino"></category><category term="nano"></category></entry></feed>